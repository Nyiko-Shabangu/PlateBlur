version: 2.1

jobs:
  build-android:
    docker:
      - image: cimg/android:2023.10  # Use the Android image suitable for your project

    steps:
      - checkout  # Check out the code from your repository
      
      - run:
          name: "Set up environment"
          command: |
            echo "Setting up environment"
            # Add any setup commands here if necessary

      - run:
          name: "Build the Android project"
          command: ./gradlew build  # This assumes you have gradlew in your project root

      - run:
          name: "Run tests"
          command: ./gradlew test  # This will run unit tests

      - run:
          name: "Run UI tests"
          command: ./gradlew connectedAndroidTest  # This will run UI tests on connected devices

workflows:
  build-workflow:
    jobs:
      - build-android
